<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yu Satoã®ã‚¢ãƒ—ãƒª</title>
    <style>
      /*
       * ----------------------------------------------------
       * åŸºæœ¬è¨­å®š & èƒŒæ™¯ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
       * ----------------------------------------------------
       */
      @keyframes color-shift {
        0% { background-position: 0% 0%; }
        50% { background-position: 100% 100%; }
        100% { background-position: 0% 0%; }
      }

      body {
        font-family: "SF Pro Display", "Helvetica Neue", Arial, sans-serif;
        color: #1d1d1f;
        margin: 0;
        padding: 40px 5%;
        min-height: 100vh;
      
        background-image: linear-gradient(
          135deg,
          #ffe0e6,
          #e0f7ff,
          #fff9e0,
          #e0ffe0
        );
        background-size: 400% 400%;
        background-attachment: fixed;
        animation: color-shift 20s ease infinite;
      }
      .gradient {
        background: linear-gradient(90deg, #00aaff, #a000ff);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        font-weight: 700;
        display: inline-block;
      }

      h1 {
        text-align: center;
        margin-bottom: 20px;
        font-weight: 600;
      }

      /* 
       * ã‚«ãƒ†ã‚´ãƒªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
       */
      .filter-container {
        display: flex;
        justify-content: center;
        gap: 10px;
        margin-bottom: 40px;
        flex-wrap: wrap;
      }
      .filter-btn {
        background: rgba(255, 255, 255, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.3);
        padding: 8px 20px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 0.9rem;
        font-weight: 500;
        color: #333;
        backdrop-filter: blur(5px);
        transition: all 0.2s ease;
      }
      .filter-btn:hover {
        background: rgba(255, 255, 255, 0.7);
        transform: translateY(-2px);
      }
      .filter-btn.active {
        background: #007aff;
        color: #fff;
        border-color: #007aff;
        box-shadow: 0 4px 15px rgba(0, 122, 255, 0.3);
      }

      .grid {
        display: grid;
        /* ã‚«ãƒ¼ãƒ‰å¹…ã®æœ€å°å€¤ã‚’ç¢ºä¿ã—ã¤ã¤è‡ªå‹•é…ç½® */
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 24px;
        align-items: start; /* é«˜ã•ãŒå¤‰ã‚ã£ã¦ã‚‚ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãŒå´©ã‚Œãªã„ã‚ˆã†ã«ä¸Šæƒãˆ */
      }
    
      /* 
       * ã‚«ãƒ¼ãƒ‰æœ¬ä½“ 
      */
      .card {
        position: relative;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        background: rgba(255, 255, 255, 0.5);
        border-radius: 20px;
        box-shadow:
          0 6px 20px rgba(0,0,0,0.1),
          inset 0 0 0 1px rgba(255, 255, 255, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.2);
        padding: 24px;
      
        display: flex;
        flex-direction: column;
        justify-content: space-between;

        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š */
        transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
      }
    
      .card.hidden {
        display: none;
      }

      /* ãƒã‚¤ã‚ºãƒ†ã‚¯ã‚¹ãƒãƒ£ */
      .card::before {
        content: "";
        position: absolute;
        inset: 0;
        background: url('https://grainy-gradients.vercel.app/noise.svg');
        opacity: 0.3;
        mix-blend-mode: overlay;
        border-radius: inherit;
        filter: blur(4px);
        pointer-events: none;
        mix-blend-mode: soft-light;
        z-index: 0;
      }

      .card:hover {
        transform: translateY(-4px);
        box-shadow:
          0 12px 30px rgba(0,0,0,0.2),
          inset 0 0 0 1px rgba(255, 255, 255, 0.9);
        background: rgba(255, 255, 255, 0.7);
      }
    
      /* ã‚«ãƒ¼ãƒ‰å†…ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒ©ãƒƒãƒ‘ãƒ¼ (z-indexç¢ºä¿) */
      .card-content {
        position: relative;
        z-index: 1;
        margin-bottom: 20px;
      }

      .app-name {
        font-size: 1.4rem;
        font-weight: 700;
        margin-bottom: 4px;
      }
      .code-name {
        font-size: 0.85rem;
        color: #666;
        margin-bottom: 12px;
        font-weight: 500;
        letter-spacing: 0.03em;
      }
    
      /*
       * åˆ‡ã‚Šæ›¿ãˆã‚¨ãƒªã‚¢ï¼ˆè©³ç´°ã¨èª¬æ˜æ–‡ï¼‰
       */
      .toggle-area {
        cursor: pointer; /* æŒ‡ã‚¢ã‚¤ã‚³ãƒ³ã«ã™ã‚‹ */
        position: relative;
        /* ã‚¿ãƒƒãƒ—ã—ã‚„ã™ã„ã‚ˆã†ã«å°‘ã—ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ã‚’æŒãŸã›ã‚‹ */
        padding: 8px 0; 
        transition: opacity 0.2s;
      }
      .toggle-area:active {
        opacity: 0.7;
      }

      /* çŸ­ã„è©³ç´°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¡¨ç¤ºï¼‰ */
      .short-detail {
        font-size: 1rem;
        color: #333;
        line-height: 1.5;
        display: block; /* ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§è¡¨ç¤º */
      
        /* ã‚¿ãƒƒãƒ—ã§ãã‚‹ã“ã¨ã‚’ç¤ºã™è£…é£¾ */
        text-decoration: underline dotted #999;
        text-underline-offset: 4px;
      }

      /* é•·ã„èª¬æ˜æ–‡ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆéè¡¨ç¤ºï¼‰ */
      .long-description {
        display: none; /* åˆæœŸçŠ¶æ…‹ã¯éè¡¨ç¤º */
        font-size: 0.95rem;
        color: #1d1d1f;
        line-height: 1.6;
        background: rgba(255, 255, 255, 0.4);
        padding: 15px;
        border-radius: 12px;
        margin-top: 5px;
        border: 1px solid rgba(255,255,255,0.3);
      }

      /* 
       * â˜…é‡è¦: activeã‚¯ãƒ©ã‚¹ãŒã¤ã„ãŸæ™‚ã®æŒ™å‹• 
       * è¦ªè¦ç´ (.card)ã«activeãŒã¤ã„ãŸã‚‰ä¸­èº«ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹
       */
      .card.active .short-detail {
        display: none; /* çŸ­ã„æ–¹ã¯æ¶ˆã™ */
      }
      .card.active .long-description {
        display: block; /* é•·ã„æ–¹ã‚’è¡¨ç¤ºï¼ˆã“ã‚Œã§ã‚«ãƒ¼ãƒ‰ãŒè‡ªç„¶ã«åºƒãŒã‚‹ï¼‰ */
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-5px); }
        to { opacity: 1; transform: translateY(0); }
      }

      .btn {
        position: relative;
        z-index: 1;
        background: #007aff;
        color: white;
        text-decoration: none;
        text-align: center;
        padding: 12px 0;
        border-radius: 12px;
        font-weight: 600;
        transition: background .2s ease, transform .1s ease;
        display: block; /* å¹…ã„ã£ã±ã„ã« */
      }
      .btn:hover {
        background: #0058d1;
        transform: translateY(-1px);
      }
      footer {
        text-align: center;
        margin-top: 50px;
        color: #888;
        font-size: 0.9rem;
      }

      /*
       * ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
       */
      @media (prefers-color-scheme: dark) {
        body {
          color: #f5f5f7;
          background-image: linear-gradient(
            135deg,
            #503037, #304557, #575230, #305730
          );
        }
        h1 { color: #fff; }
      
        .filter-btn {
          background: rgba(45, 45, 50, 0.4);
          border: 1px solid rgba(255, 255, 255, 0.1);
          color: #e0e0e0;
        }
        .filter-btn:hover {
          background: rgba(60, 60, 70, 0.8);
        }
        .filter-btn.active {
          background: #0a84ff;
          color: #fff;
          border-color: #0a84ff;
        }

        .card {
          background: rgba(45, 45, 50, 0.4);
          box-shadow:
              0 6px 20px rgba(0,0,0,0.6),
              inset 0 0 0 1px rgba(255, 255, 255, 0.05);
          border: 1px solid rgba(255, 255, 255, 0.05);
        }
        .card::before { opacity: 0.15; }
        .card:hover {
          background: rgba(45, 45, 50, 0.8);
        }
      
        .code-name, footer { color: #a0a0a0; }
        .short-detail { color: #e0e0e0; }
        .long-description {
          color: #f0f0f0;
          background: rgba(0, 0, 0, 0.2);
          border-color: rgba(255,255,255,0.05);
        }
      }
  </style>
  </head>
  <body>
    <h1>ğŸ“±Yu Satoã®ã‚¢ãƒ—ãƒª</h1>
    <div style="text-align: center; margin-bottom: 20px;">
      <p class="card" style="display:inline-block; margin:0;">
        <span class="gradient">With my Liquid Glass, I made this in 6 hours</span>
      </p>
    </div>
    <div class="filter-container">
      <button class="filter-btn active" data-filter="all">ã™ã¹ã¦</button>
      <button class="filter-btn" data-filter="internet">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆ</button>
      <button class="filter-btn" data-filter="utility">ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£</button>
    </div>
    <div class="grid" id="apps">
      <p style="text-align:center; color:#888; grid-column: 1/-1;">èª­ã¿è¾¼ã¿ä¸­...</p>
    </div>
    <footer>Â©2025 Yu Sato</footer>
      <script>
        async function loadApp(app) {
          const fetchPromises = [
            fetch(`${app.path}/latestU.txt`).then(r => r.text()).catch(() => "N/A"), 
            fetch(`${app.path}/latestV.txt`).then(r => r.text()).catch(() => "N/A"), 
          ];
    
          if (app.codename) {
            fetchPromises.push(
              fetch(`${app.path}/latestCN.txt`).then(r => r.text()).catch(() => ""),
              fetch(`${app.path}/latestNA.txt`).then(r => r.text()).catch(() => app.name)
            );
          }

          const results = await Promise.all(fetchPromises);

          const url = results[0].trim();
          const ver = results[1].trim();

          let cn = "";
          let fetchedAppName = app.name;

          if (app.codename) {
            cn = results[2].trim();
            fetchedAppName = results[3].trim();
          }
  
          const displayName = fetchedAppName || app.name;
          const categories = Array.isArray(app.category) ? app.category.join(' ') : app.category;
    
          const description = app.description || app.detail;

          /*
           * ä¿®æ­£ãƒã‚¤ãƒ³ãƒˆ:
           * - toggle-area å…¨ä½“ã« onclick ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¨­å®š
           * - this.closest('.card') ã§è¦ªã‚«ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã€activeã‚¯ãƒ©ã‚¹ã‚’ã¤ã‘å¤–ã—ã™ã‚‹
          */
          return `
            <div class="card" data-category="${categories}">
              <div class="card-content">
                <div class="app-name">${displayName} ${ver}</div>
                ${app.codename && cn ? `<div class="code-name">Codename: ${cn}</div>` : ""}
          
                <div class="toggle-area" onclick="this.closest('.card').classList.toggle('active')">
                  <div class="short-detail">
                    ${app.detail}
                  </div>
                  <div class="long-description">
                    ${description}
                  </div>
                </div>
  
              </div>
              <a class="btn" href="${url}" target="_blank">å…¥æ‰‹</a>
            </div>
          `;
        }

        (async () => {
          const container = document.getElementById("apps");

          try {
            const response = await fetch('apps.json');
            if (!response.ok) throw new Error(`JSON load failed: ${response.status}`);
            const apps = await response.json();

            const html = await Promise.all(apps.map(loadApp));
            container.innerHTML = html.join("");

            // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
            const filterBtns = document.querySelectorAll('.filter-btn');
            const cards = container.getElementsByClassName('card');

            filterBtns.forEach(btn => {
              btn.addEventListener('click', () => {
                filterBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                const filterValue = btn.getAttribute('data-filter');

                Array.from(cards).forEach(card => {
                  const cardCategories = card.getAttribute('data-category');
                  if (filterValue === 'all' || cardCategories.includes(filterValue)) {
                    card.classList.remove('hidden');
                  } else {
                    card.classList.add('hidden');
                  }
                });
              });
            });

          } catch (error) {
            console.error(error);
            container.innerHTML = '<p style="text-align:center; color:red; grid-column: 1/-1;">ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p>';
          }
        })();
    </script>
  </body>
</html>